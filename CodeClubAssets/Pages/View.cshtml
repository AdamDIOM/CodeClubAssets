@page
@model CodeClubAssets.Pages.ViewModel

@{
    ViewData["Title"] = "View";
}

<h1>View</h1>

<form method="post">
    <div class="form-group">
        <label asp-for="qry">Search</label>
        <input asp-for="qry" />
        <input type="submit" asp-route-qry="@Model.qry" asp-route-filter="@Model.filter" value="Search" class="btn btn-success">
    </div>
    <div class="form-group">
        <input type="submit" asp-page-handler="FilterKWC" asp-route-qry="@Model.qry" asp-route-filter="@Model.filter" value="Filter to KWC" class="btn btn-success" />
        <input type="submit" asp-page-handler="ClearFilter" asp-route-qry="@Model.qry" value="Clear filter" class="btn btn-success" />
    </div>
</form>

<table class="table">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Item[0].ID)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Item[0].Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Item[0].Description)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Item[0].Location)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Item[0].ParentID)
            </th>
        </tr>
    </thead>
    <tbody>
@foreach (var item in Model.Item) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.ID)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
            <td>
                @Html.DisplayFor(modelItem => item.Description)
            </td>
            <td>
                    @if (!item.Out)
                    {
                        <span>@item.Location</span>
                    }
                    else
                    {
                        <span>Out</span>
                    }
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ParentID)
            </td>
        </tr>
}
    </tbody>
</table>
